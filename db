#!/usr/bin/env bash

set -euo pipefail

menu() {
    echo "What do you wish Mr. $USER!?"
    echo "s -> Show The DataBase."
    echo "i -> Insert data on the DataBase."
    echo "u -> Update to DataBase."
    echo "d -> Delete some data from the DataBase"
    echo "q -> Exit"

    echo -n "Choise an option: "
}

main() {
    local pathDB="$HOME/projects/db"
    
    menu

    read -r todo
    case "$todo" in
        s)
            echo "Show DataBase"
            (
                cd $pathDB || exit 1
                sqlite3 < show.sql
            )
            ;;
        i)
            echo "Insert data"
            (
                cd $pathDB || exit 1
                vim insert.sql +4
                sqlite3 < insert.sql
            )
            ;;
        u)
            echo "Update data"
            (
                cd $pathDB || exit 1
                vim update.sql +4
                sqlite3 < update.sql
            )
            ;;

        d)
            echo "Delete something"
            (
                cd $pathDB || exit 1
                vim delete.sql +3
                sqlite3 < delete.sql
            )
            ;;
        q)
            echo "Leave me alone"
            exit 0
            ;;
        *)
            echo "Invalid Input"
            exit 1
            ;;
    esac
}

main

